<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin SaAya Donat</title>

<style>
body{font-family:Arial;background:#fff0f6;margin:0;padding:15px}
.card{background:#fff;padding:15px;margin-bottom:15px;border-radius:12px}
button{padding:6px 10px;border:none;background:#ff6fb5;color:#fff;border-radius:6px}
</style>
</head>
<body>

<h2>üîê Admin</h2>

<div class="card">
<input id="pName" placeholder="Nama Produk"><br><br>
<input id="pPrice" type="number" placeholder="Harga"><br><br>
<input id="pStock" type="number" placeholder="Stok"><br><br>
<button onclick="addProduct()">Tambah Produk</button>
</div>

<h3>Daftar Produk</h3>
<div id="products"></div>

<h3>Data Order</h3>
<div id="orders"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
var firebaseConfig = {
  apiKey: "AIzaSyA7Ui4SXydisrIUpeX32vpqcIDQCsqOLXo",
  authDomain: "saayadonat.firebaseapp.com",
  databaseURL: "https://saayadonat-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "saayadonat",
  storageBucket: "saayadonat.firebasestorage.app",
  messagingSenderId: "191838417140",
  appId: "1:191838417140:web:b698670357abe7dff2eea1"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.database();

var products = [];

db.ref("products").on("value", function(snapshot){
  products = snapshot.val() || [];
  renderProducts();
});

db.ref("orders").on("value", function(snapshot){
  var html="";
  snapshot.forEach(function(child){
    var o = child.val();
    html+=`
      <div class="card">
      ${o.date} - ${o.name} beli ${o.product}
      </div>`;
  });
  document.getElementById("orders").innerHTML = html;
});

function addProduct(){
  products.push({
    name:pName.value,
    price:+pPrice.value,
    stock:+pStock.value
  });
  db.ref("products").set(products);
}

function renderProducts(){
  var html="";
  products.forEach(function(p){
    html+=`
      <div class="card">
      ${p.name} - Rp ${p.price} - Stok ${p.stock}
      </div>`;
  });
  document.getElementById("products").innerHTML = html;
}
</script>

</body>
  </html>
